"use strict";

var db = window.localStorage;
var simpleSupplyChainByteCode = "0x" + '6060604052341561000f57600080fd5b604051610fe4380380610fe4833981016040528080518201919050505b336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550426001819055506000600860006101000a81548160ff0219169083600581111561009257fe5b0217905550806040518082805190602001908083835b6020831015156100ce57805182525b6020820191506020810190506020830392506100a8565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390206009600060068110151561010b57fe5b0160005b5081600019169055507f6db675b1cf25b66894ead1496be1e5ca65a7d322c1d5af85dfb41040d32b1ce6338260405180806020018473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001838103835260108152602001807f61646465645261774d6174657269616c00000000000000000000000000000000815250602001838103825284818151815260200191508051906020019080838360005b838110156101e65780820151818401525b6020810190506101ca565b50505050905090810190601f1680156102135780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15b505b610db0806102346000396000f30060606040523615610076576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680637043e00e1461007b57806392872710146100d85780639788cbe914610178578063ab773c1c146101d5578063da5730aa14610204578063e872dc7e14610261575b600080fd5b341561008657600080fd5b6100d6600480803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919050506102be565b005b34156100e357600080fd5b610176600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919050506104b2565b005b341561018357600080fd5b6101d3600480803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919050506106e0565b005b34156101e057600080fd5b6101e86108d4565b604051808260ff1660ff16815260200191505060405180910390f35b341561020f57600080fd5b61025f600480803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919050506108f7565b005b341561026c57600080fd5b6102bc600480803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610aeb565b005b33600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506004600860006101000a81548160ff0219169083600581111561031e57fe5b0217905550806040518082805190602001908083835b60208310151561035a57805182525b602082019150602081019050602083039250610334565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390206009600460068110151561039757fe5b0160005b5081600019169055507f6db675b1cf25b66894ead1496be1e5ca65a7d322c1d5af85dfb41040d32b1ce6338260405180806020018473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001838103835260128152602001807f7265636569766564427952657461696c65720000000000000000000000000000815250602001838103825284818151815260200191508051906020019080838360005b838110156104725780820151818401525b602081019050610456565b50505050905090810190601f16801561049f5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15b50565b600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561050e57600080fd5b8160069080519060200190610524929190610cdf565b50426007819055506005600860006101000a81548160ff0219169083600581111561054b57fe5b0217905550806040518082805190602001908083835b60208310151561058757805182525b602082019150602081019050602083039250610561565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600960056006811015156105c457fe5b0160005b5081600019169055507f6db675b1cf25b66894ead1496be1e5ca65a7d322c1d5af85dfb41040d32b1ce6338260405180806020018473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001838103835260138152602001807f7075726368617365644279437573746f6d657200000000000000000000000000815250602001838103825284818151815260200191508051906020019080838360005b8381101561069f5780820151818401525b602081019050610683565b50505050905090810190601f1680156106cc5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15b5050565b33600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506002600860006101000a81548160ff0219169083600581111561074057fe5b0217905550806040518082805190602001908083835b60208310151561077c57805182525b602082019150602081019050602083039250610756565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600960026006811015156107b957fe5b0160005b5081600019169055507f6db675b1cf25b66894ead1496be1e5ca65a7d322c1d5af85dfb41040d32b1ce6338260405180806020018473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001838103835260158152602001807f6d616e75666163747572696e67436f6d706c6574650000000000000000000000815250602001838103825284818151815260200191508051906020019080838360005b838110156108945780820151818401525b602081019050610878565b50505050905090810190601f1680156108c15780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15b50565b6000600860009054906101000a900460ff1660058111156108f157fe5b90505b90565b33600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001600860006101000a81548160ff0219169083600581111561095757fe5b0217905550806040518082805190602001908083835b60208310151561099357805182525b60208201915060208101905060208303925061096d565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600960016006811015156109d057fe5b0160005b5081600019169055507f6db675b1cf25b66894ead1496be1e5ca65a7d322c1d5af85dfb41040d32b1ce6338260405180806020018473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001838103835260128152602001807f72656365697665644279537570706c6965720000000000000000000000000000815250602001838103825284818151815260200191508051906020019080838360005b83811015610aab5780820151818401525b602081019050610a8f565b50505050905090810190601f168015610ad85780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15b50565b33600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506003600860006101000a81548160ff02191690836005811115610b4b57fe5b0217905550806040518082805190602001908083835b602083101515610b8757805182525b602082019150602081019050602083039250610b61565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060096003600681101515610bc457fe5b0160005b5081600019169055507f6db675b1cf25b66894ead1496be1e5ca65a7d322c1d5af85dfb41040d32b1ce6338260405180806020018473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001838103835260158152602001807f726563656976656442794469737472696275746f720000000000000000000000815250602001838103825284818151815260200191508051906020019080838360005b83811015610c9f5780820151818401525b602081019050610c83565b50505050905090810190601f168015610ccc5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15b50565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610d2057805160ff1916838001178555610d4e565b82800160010185558215610d4e579182015b82811115610d4d578251825591602001919060010190610d32565b5b509050610d5b9190610d5f565b5090565b610d8191905b80821115610d7d576000816000905550600101610d65565b5090565b905600a165627a7a723058202a6ae29de1473b6f223698d11d1d6523d60d3b061ebf158e8741f897979dc9d40029';
var simpleSupplyChainAbiString = '[{"constant":false,"inputs":[{"name":"data","type":"string"}],"name":"receivedByRetailer","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"customerId","type":"string"},{"name":"data","type":"string"}],"name":"purchasedByCustomer","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"data","type":"string"}],"name":"manufacturingComplete","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"getAssetState","outputs":[{"name":"","type":"uint8"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"data","type":"string"}],"name":"receivedBySupplier","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"data","type":"string"}],"name":"receivedByDistributor","outputs":[],"payable":false,"type":"function"},{"inputs":[{"name":"data","type":"string"}],"payable":false,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"action","type":"string"},{"indexed":false,"name":"who","type":"address"},{"indexed":false,"name":"data","type":"string"}],"name":"StateChanged","type":"event"}]';
var currentNodeUrl = "http://localhost:8545";
var ethAccountPassword = "<password>";

function addAssetToDB(assetId, assetJsonData) {
    db.setItem(assetId, JSON.stringify(assetJsonData));
}

function getAssetFromDB(assetId) {
    return JSON.parse(db.getItem(assetId));
}

function addToDB(key, data) {
    db.setItem(key, data);
}

function getFromDB(key) {
    return db.getItem(key);
}

function getAllAssetsFromDB() {
    var allAssets = [];
    for (var i = 0; i < db.length; i++) {
        allAssets.push(db.getItem(localStorage.key(i)));
    }
    return allAssets;
}

function clearDB() {
    db.clear();
    window.location.reload(true);
}

function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}

function getAllAccounts(providerUrl) {
    return new Promise(function (resolve, reject) {
        var web3 = new Web3(new Web3.providers.HttpProvider(providerUrl));
        web3.eth.getAccounts(function (error, accountsList) {
            if (error) {
                reject(error);
            } else {
                resolve(accountsList);
            }
        });
    });
}

//# sourceMappingURL=helper.js.map
